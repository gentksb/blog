---
import { LinkCardLayout } from "@layouts/LinkCardLayout"
import { getOgpMetaData } from "functions/api/src/getOgpMetaDataetOgpMetaData"
import type { OgpData } from "@type/ogpData-type"

interface Props {
  url: string
  linkUrl?: string
}

const { url, linkUrl } = Astro.props

// check if the url is valid
try {
  new URL(url)
  if (linkUrl) {
    new URL(linkUrl)
  }
} catch (error) {
  throw new Error("Invalid URL")
}

// dummy
const ogpData = {
  ogpTitle: "dummy title",
  ogpSiteName: "dummy site name",
  ogpDescription: "dummy description",
  ogpImageUrl: "https://dummyimage.com/600x400/000/fff"
} as OgpData
---

<LinkCardLayout
  title={ogpData.ogpTitle ?? url}
  siteName={ogpData.ogpSiteName ?? new URL(url).hostname}
  description={ogpData.ogpDescription ?? ""}
  imageSrc={ogpData.ogpImageUrl}
  url={linkUrl ?? url}
/>
