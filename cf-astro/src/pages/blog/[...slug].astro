---
import { type CollectionEntry, getCollection, getEntry } from 'astro:content';
import BlogPost from '../../layouts/BlogPost.astro';

// https://docs.astro.build/en/guides/content-collections/#building-for-server-output-ssr

const { slug } = Astro.params
if (slug===undefined){
	throw new Error("Slug is required")
}

const entry = await getEntry('blog', slug);

if (entry === undefined) {
	return Astro.redirect("/404")
}

const { Content } = await entry.render();
---

<BlogPost {...entry.data}>
	<Content />
</BlogPost>
